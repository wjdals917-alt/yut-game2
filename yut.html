<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>윷 던지기</title>
  <style>
    body {
      font-family: "Noto Sans KR", sans-serif;
      text-align: center;
      margin-top: 40px;
    }

    h1 {
      margin-bottom: 20px;
    }

    button {
      font-size: 26px;
      padding: 10px 25px;
      cursor: pointer;
      margin-bottom: 25px;
    }

    .yut-area {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .yut-area img {
      width: 80px;
      height: 200px;
      object-fit: contain;
      filter: drop-shadow(0px 4px 4px rgba(0,0,0,0.4));
      transition: transform 0.2s;
    }

    /* 흔들리는 애니메이션 */
    @keyframes shake {
      0%   { transform: translateY(0px) rotate(0deg); }
      20%  { transform: translateY(-10px) rotate(-5deg); }
      40%  { transform: translateY(10px) rotate(5deg); }
      60%  { transform: translateY(-10px) rotate(-8deg); }
      80%  { transform: translateY(10px) rotate(8deg); }
      100% { transform: translateY(0px) rotate(0deg); }
    }

    .shaking img {
      animation: shake 0.4s;
    }

    #result {
      font-size: 40px;
      font-weight: bold;
      margin-top: 10px;
    }

    #detail {
      font-size: 20px;
      color: #555;
      margin-top: 5px;
    }
  </style>
</head>
<body>

  <h1>윷 던지기</h1>

  <!-- 버튼은 딱 하나 -->
  <button onclick="throwYut()">던지기</button>

  <!-- 윷 4개 영역 -->
  <div id="yutArea" class="yut-area">
    <!-- 1번 윷: 빽도용 특별 윷 -->
    <img id="s1" src="yut_front.png" alt="윷1" />
    <img id="s2" src="yut_front.png" alt="윷2" />
    <img id="s3" src="yut_front.png" alt="윷3" />
    <img id="s4" src="yut_front.png" alt="윷4" />
  </div>

  <div id="result">결과: -</div>
  <div id="detail"></div>

  <script>
    // 이미지 파일 이름
    const IMG_FRONT = "yut_front.png";
    const IMG_BACK = "yut_back.png";
    const IMG_BACK_SPECIAL = "yut_back_x.png"; // 빽도용 뒷면 윷

    // 윷 정보 (첫 번째 윷이 빽도용)
    const sticksInfo = [
      { id: "s1", special: true },   // 빽도 윷
      { id: "s2", special: false },
      { id: "s3", special: false },
      { id: "s4", special: false }
    ];

    function throwYut() {
      const yutArea = document.getElementById("yutArea");
      const resultEl = document.getElementById("result");
      const detailEl = document.getElementById("detail");

      // 이전 텍스트 초기화
      resultEl.textContent = "결과: -";
      detailEl.textContent = "";

      // 흔들기 시작
      yutArea.classList.add("shaking");

      setTimeout(() => {
        // 흔들기 종료
        yutArea.classList.remove("shaking");

        const frontArray = []; // true = 앞면, false = 뒷면

        sticksInfo.forEach((stick, index) => {
          const isFront = Math.random() < 0.35; // 앞/뒤 랜덤
          frontArray[index] = isFront;

          const imgEl = document.getElementById(stick.id);

          if (isFront) {
            // 앞면
            imgEl.src = IMG_FRONT;
          } else {
            // 뒷면: 빽도용 윷이면 X 표시된 이미지
            imgEl.src = stick.special ? IMG_BACK_SPECIAL : IMG_BACK;
          }
        });

        // 결과 계산
        showResult(frontArray);
      }, 400);
    }

    function showResult(frontArray) {
      const resultEl = document.getElementById("result");
      const detailEl = document.getElementById("detail");

      // 앞면 개수 세기
      let frontCount = frontArray.filter(v => v).length;

      // 빽도 규칙:
      // "특별 윷(첫 번째)이 혼자 뒷면이고, 나머지 3개는 모두 앞면"일 때
      // => 빽도
      const backIndices = frontArray
        .map((isFront, idx) => (isFront ? -1 : idx))
        .filter(idx => idx !== -1);

      let name = "";
      let detail = "";

      if (
        backIndices.length === 1 &&
        backIndices[0] === 0 &&          // 첫 번째 윷이 뒷면
        frontArray[1] && frontArray[2] && frontArray[3] // 나머지 3개 앞면
      ) {
        name = "빽도";
        detail = "말이 한 칸 뒤로 이동합니다.";
      } else {
        // 일반 윷 규칙
        if (frontCount === 0) {
          name = "모";
          detail = "말이 다섯 칸 앞으로 이동합니다.";
        } else if (frontCount === 1) {
          name = "도";
          detail = "말이 한 칸 앞으로 이동합니다.";
        } else if (frontCount === 2) {
          name = "개";
          detail = "말이 두 칸 앞으로 이동합니다.";
        } else if (frontCount === 3) {
          name = "걸";
          detail = "말이 세 칸 앞으로 이동합니다.";
        } else if (frontCount === 4) {
          name = "윷";
          detail = "말이 네 칸 앞으로 이동하고 한 번 더 던집니다.";
        }
      }

      resultEl.textContent = "결과: " + name;
      detailEl.textContent = detail;
    }
  </script>

</body>
</html>